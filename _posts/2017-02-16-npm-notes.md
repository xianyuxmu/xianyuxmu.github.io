---
layout: post
title: npm Notes
date: 2017-02-16 22:00:00 +0800
categories:
- Tech
tags:
- npm

---

### Tips

1. 使用 `-S` 和 `-D` 代替 `--save` 和 `--save-dev`。
2. [锁定版本号](http://stackoverflow.com/questions/11459733/check-in-node-modules-vs-shrinkwrap)，去删除 -S  和 -D 为你添加的那些 ^ 记号。[它们非常危险](http://stackoverflow.com/questions/22137778/what-does-mean-in-package-json-versioning)，因为它们允许 npm install（或简写为 npm i）从 npm 库中拉取最新的小版本（语义化的版本号中的第2个数）。比如从 v6.1.0 到 v6.2.0 就是一个小版本发布。锁定版本号，最好使用 shrinkwrap：npm shrinkwrap 创建一个包含依赖的具体版本的新文件。
3. 手动添加环境变量，防止系统环境变量影响 npm 命令执行。通过 `npm run build --production=true` 或者 `npm run build --production=false` 来覆盖掉可能存在的系统环境变量。
4. 增加依赖包时记得加上 `-D` 或者 `-S`，大写 D 和 大写 S。

----

## Semver

contents below are summarized from [Semver: A Primer](https://nodesource.com/blog/semver-a-primer/).

> All packages published to npm are assumed to follow semver semantics.

The concept of semver ranges as used by npm was inspired by Bundler, the npm of the Ruby ecosystem. For a Ruby application, semver ranges have a greater impact than they do in Node.js.

In Ruby, as in many other software platforms, only a single, global version of a gem (package) can be loaded throughout an entire application. 

Semver ranges exist to permit newer versions of a package to be automatically installed automatically.

The major version 0 is supposed to be reserved for "initial development", where "anything may change at any time", so the "patch" and "minor, non-breaking changes" essentially have no meaning.


Thankfully fixed versioning is not widespread.

Semver is an idealist that simply ignores the fallibility of humans—consumers are entirely at the mercy of package whether authors follow semver properly. 

Semver is a tool for development only.

versioning for deployment.

----

## Related

- [What is the difference between Bower and npm?](http://stackoverflow.com/questions/18641899/what-is-the-difference-between-bower-and-npm) - npm is for Node.js modules, but works for front-end also and solves *dependency conflicts* without nesting deoendencies, Bower is created solely for the front-end and uses a *flat dependency tree*.
- [Nested Dependencies](https://maxogden.com/nested-dependencies.html) - Insight into why node_modules works the way it does.
- [What's the difference between dependencies, devDependencies and peerDependencies in npm package.json file?](http://stackoverflow.com/questions/18875674/whats-the-difference-between-dependencies-devdependencies-and-peerdependencies) - dependencies are required to run, devDependencies only to develop.
- [Awesome npm resources and tips](https://github.com/sindresorhus/awesome-npm#tips)
- [One-line node modules](https://github.com/sindresorhus/ama/issues/10#issuecomment-117766328)
- [yarn](https://github.com/yarnpkg/yarn) 的出现解决了 npm 的几个头疼的问题，yarn 增加了离线包缓存、保证不同环境下安装的一致性、安装过程请求失败自动重试等特性来提供一个快速、可信赖、安全的依赖管理方式。

----

Robin on February 16, 2017
