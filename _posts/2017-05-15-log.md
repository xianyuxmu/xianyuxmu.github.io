---
layout: post
title: 日志
date: 2017-05-15 19:24:00 +0800
categories:
- Tech
tags:
- 前端

---

## 日志的用途

日志的用途大致分为几个方面：

- 调试
- 服务端数据监控
- 安全／入侵检查
- 审计
- 业务指标分析
- 营销数据监控

## 详细描述

### 调试

- 关联变量的值
- 是否有函数调用
- 函数返回值
- 接口响应
- 事件调度顺序


### 服务端数据监控

用于排查服务端服务的异常。

### 安全／入侵检查

- 谁执行了操作
- 操作了什么
- 操作的时间
- 操作的过程
- 操作涉及的系统
- 浸入类型与路径

### 审计

将事件活动记录在日志中，用于今后的审计工作。

### 业务指标分析

通过日志埋点进行业务指标的分析。如：用户生命周期价值(CLTV)。

### 日志清单

- 来自客户端的请求(GET、POST等)
- 异常
- 故障报警
- 转化率(销售额、社交媒体分享数等)
- 应用授权(用户访问受限资源时)
- 功能调用(在页面之间跳转时)
- 性能度量
- 服务端响应时间
- 页面完成加载所需时间
- 页面完成渲染所需时间

### 应用请求日志

- 时间戳
- 服务器主机名称(判断属于哪一个机器集群)
- 请求ID(用于查询关联日志)
- 请求的IP地址
- 请求的HTTP地址
- 请求的URL
- 请求的HTTP头部
- 请求的协议(HTTP、HTTPS)
- 请求的来源
- 用户代理
- 服务端响应
- 响应状态码
- 响应头
- 响应时间
- 请求ID

不需要做日志记录的：

- 密码
- 私密令牌
- 信用卡卡号
- 可能会伤及用户隐私的信息
- 某些机密信息

### 异常日志

- 时间戳
- 异常信息
- 调用栈

### 日志预警

一般来说，凡是应用依赖的系统服务，其状态都应被统一的监控起来。

### 跟踪业务指标(效果跟踪)

- 新用户量
- 新注册量
- 用户交易量
- 应用邀请数

交易操作：

- 时间戳
- 用户IP地址
- 用户账号
- 是否是第一次购买
- 下单商品
- 总交易数
- 入口页面
- 进入入口页面所使用的关键字
- 营销活动标示
- 前链终点

### 性能分析与优化

接入第三方性能平台，对日志进行分析。

### 客户端事件记录

使用图片路径来上报客户端的日志。

### 日志数据挖掘

使用 Google Analytics 或者其他第三方工具来对日志进行挖掘分析。


> 采用 JSON 格式存储日志。



